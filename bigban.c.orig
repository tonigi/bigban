/*
                                BIGBAN.C

Usage:
BigBan [-r] [-h nn] [-v nn] [-l nn] [-f nn] [-b nn] message

-r     : causes font to be displayed horizontally
         [please use it as first option in command line];

-h nn  : causes original font (8*8) to be magnified nn times
         across the screen lines;

-v nn  : magnifies font nn times along the screen;

-l nn  : left margin nn spaces (e.g. for 136 column screens), by
         default text is centered on a 80-col. screen;

-f nn  : ascii char to be used for the text; 0 uses character
         currently printing (default);

-b nn  : ascii char for the background, space (32) by default.



(c) 1995  Toni Giorgino, Scuola Normale Superiore (Italy)

This program is MailWare: if you like it (or if you really dislike it!),
send a mail to...                               toni@cibs.sns.it

                                                                        */




#include <string.h>

#define BIT(n)  (1<<(n))
#define SCREENW 80
#include "font.c"

short hm=4,                     /* Moltiplicatori e parametri */
      vm=1,
      left=0;
char  fore=0,
      back=32;  
char  margine[80]="                                                                        ",
      nfill[40];

main(argc,argv)
int argc;
char *argv[];
{
        short i,k;                      /* Counters */
        short reverse=0;                /* Flag: 1 -> font orizzontale */

/*        void nprint(char); */
/*        void rprint(char); */
        
        if (argc==1) {
                printf("Missing argument(s): please see help file; proper usage is:\n\n");
                printf("%s [-r] [-h nn] [-v nn] [-l nn] [-f nn] [-b nn] message\n",argv[0]);
                exit(5);
        }
        
        k=1;
        while (argv[k][0]=='-' && argv[k][1]!='-') {
                switch (argv[k][1]) {
                        case 'r': reverse=1;
                                  hm=1;
                                  vm=1;
                                  break;
                        case 'h': hm=atoi(argv[k]+2);
                                  break;
                        case 'v': vm=atoi(argv[k]+2);
                                  break;
                        case 'l': left=atoi(argv[k]+2);
                                  break;
                        case 'f': fore=(char)atoi(argv[k]+2);
                                  break;
                        case 'b': back=(char)atoi(argv[k]+2);
                                  break;
                        default:
                                  printf("Wrong argument '-%c': please see help file; proper usage is:\n\n",argv[k][1]);
                                  printf("%s [-r] [-h nn] [-v nn] [-l nn] [-f nn] [-b nn] message\n",argv[0]);
                                  exit(5);
                                  break;
                }
                if (++k==argc) {
                        printf("Missing message: please see help file; proper usage is:\n\n");
                        printf("%s [-r] [-h nn] [-v nn] [-l nn] [-f nn] [-b nn] message\n",argv[0]);
                        exit(5);
                }
        }
        
        /* ora k punta al primo argomento-stringa */

        if (argv[k][0]=='-') argv[k]++;
                /* Toglie uno dei due eventuali meni... */

        if (left==0) left=(SCREENW-8*hm)/2;
        margine[left]='\0';
                /* Prepara la stringa per il margine sinistro */

        for (i=0;i<hm;i++) nfill[i]=back;
        nfill[i]='\0';
                /* E quella per lo sfondo */


        while (1) {
                for (i=0;i<strlen(argv[k]);i++) {
                        if (reverse) rprint(argv[k][i]);
                                else nprint(argv[k][i]);
                }
        
                if (k==argc-1) exit(0);
                        /* esce se e' l'ultimo */
        
                if (reverse) rprint(32);
                        else nprint(32);
                        /* altrimenti mette uno spazio e continua */
                
                k++;
        }
        
        /* exit(0); */
}



void nprint(c)
char c;
{
        char lfore;
        char fill[40];
        register short i;               /* contatori semplici */
        register short bi,by;           /* puntatori alla riga e colonna in questione */
        
        lfore=((fore==0)?c:fore);
        c-=32;

        for (i=0;i<hm;i++) fill[i]=lfore;
        fill[i]='\0';

        for (bi=7;bi>=0;bi--) {
                for (i=0;i<vm;i++) {
                        printf("%s",margine);
                        for (by=7;by>=0;by--) {
                                if (fontb[c][by]&BIT(bi)) 
                                        printf("%s",fill);
                                else    printf("%s",nfill);
                        }
                        putchar('\n');
                }
        }
}



void rprint(c)
char c;
{
        char lfore,xtract;
        char fill[40];
        register short i;               /* contatori semplici */
        register short bi,by;           /* puntatori alla riga e colonna in questione */
        
        lfore=((fore==0)?c:fore);
        c-=32;

        for (i=0;i<hm;i++) fill[i]=lfore;
        fill[i]='\0';

        for (bi=0;bi<8;bi++) {
                xtract=fontb[c][bi];
                for (i=0;i<vm;i++) {
                        printf("%s",margine);
                        for (by=7;by>=0;by--) {
                                if (xtract&BIT(by)) 
                                        printf("%s",fill);
                                else    printf("%s",nfill);
                        }
                        putchar('\n');
                }
        }
}

